define("/WEB-UED/fancy/dist/p/register/index",["/WEB-UED/fancy/dist/c/js/globale","/WEB-UED/fancy/dist/c/js/base64"],function(require,exports,module){var G=require("/WEB-UED/fancy/dist/c/js/globale"),encode64=require("/WEB-UED/fancy/dist/c/js/base64").encode64,main={init:function(){var self=this;self.loginToken=$("#J-loginToken").val(),self._event(),self.target=G._getUrlParam("target")||"",$("a.add-target").each(function(){var url=$(this).attr("href")+"?target="+self.target;$(this).attr("href",url)})},_event:function(){var timer,self=this,mobileInput=$("#J-phonenumber"),mobileReg=($("#J-register-code"),$("#J-register-password"),$("#J-register-password-again"),/^1[3|4|5|7|8][0-9]\d{4,8}$/);mobileInput.unbind("keyup").bind("keyup",function(){mobileReg.test(mobileInput.val())?$("#J-next").attr("href","#next-page").removeClass("external"):$("#J-next").attr("href","javascript:").addClass("external")}),$("#J-next").unbind("click").bind("click",function(){$(this).hasClass("external")?alert("请输入正确的手机号码"):(clearInterval(timer),$("#J-register-code-box a").html("获取验证码"))}),$("#J-register-code-box a").unbind("click").bind("click",function(){var $this=$(this),time=60;$.ajax({type:"get",cach:!1,url:"/login/ucSendRegisterVerifyCode.do",data:{mobile:mobileInput.val()},success:function(res){1==res.info.ok?($this.text("剩余"+time+"秒"),clearInterval(timer),timer=setInterval(function(){0>=time?($this.text("重新获取"),clearInterval(timer)):(time--,$this.text("剩余"+time+"秒"))},1e3)):alert(res.info.message)},beforeSend:function(){$.showIndicator()},complete:function(){$.hideIndicator()},error:function(){}})}),$("#J-register-btn").unbind("click").bind("click",function(){var mobile=$("#J-phonenumber").val(),code=$("#J-register-code").val(),password=$("#J-register-password").val(),passwordAgain=$("#J-register-password-again").val();return code.length?password.length?password.length<6?void alert("密码长度不能少于6位"):passwordAgain.length?password!=passwordAgain?void alert("两次输入密码不一致"):(password=self.loginToken+password,password=encode64(password),void self._register({mobile:mobile,vCode:code,password:password})):void alert("请确认密码"):void alert("请输入密码"):void alert("请输入验证码")})},_register:function(data){$.ajax({type:"get",cach:!1,url:"/login/jsonRegister.do",data:data,success:function(res){var url="/index.html";url=window.fancyLoginUser?G._getUrlParam("target")||"/index.html":"/login.do?target="+G._getUrlParam("target"),1==res.info.ok?location.href=url:alert(res.info.message)},beforeSend:function(){$.showIndicator()},complete:function(){$.hideIndicator()},error:function(){}})}};main.init()}),define("/WEB-UED/fancy/dist/c/js/globale",[],function(require,exports,module){var main={init:function(){var self=this;self._back()},_back:function(){var self=this;self._navigator().mobileWebKit&&$(".J-back").off().on("click",function(e){e.stopPropagation(),e.preventDefault(),window.history.go(-1)})},_getUrlParam:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(reg);return null!=r?unescape(r[2]):null},_getLoginUser:function(callback){var loginUser;$.ajax({type:"get",cache:!1,url:"/login/getLoginUser.do",success:function(res){1==res.info.ok?(loginUser=res.data.loginUser,window.fancyLoginUser=loginUser,callback&&callback(loginUser)):alert(res.info.message)},beforeSend:function(){},complete:function(){},error:function(){}})},_getCartCount:function(userMes){userMes=userMes||window.fancyLoginUser,userMes&&$.ajax({type:"get",cache:!1,url:"/cart/countCart.json",success:function(res){return"noLogin"==res?void(location.href="/login.do?target="+location.href):void(1==res.info.ok?res.data.count>0&&$("#J-cart-count").show().html(res.data.count):alert(res.info.message))},beforeSend:function(){$.showIndicator()},complete:function(){$.hideIndicator()},error:function(){}})},_editCount:function(d){var box=$(d.box),defaultCount=d.defaultCount||1;box.html('<p class="edit-count color-gray">                <i class="iconfont J-cut">&#xe607;</i>                <span class="J-number">'+defaultCount+'</span>                <i class="iconfont J-add">&#xe608;</i>            </p>'),$(".J-cut").bind("click",function(){var curNum=parseInt($(this).parent().find(".J-number").text());1>=curNum||$(this).parent().find(".J-number").text(curNum-1)}),$(".J-add").bind("click",function(){var curNum=parseInt($(this).parent().find(".J-number").text());$(this).parent().find(".J-number").text(curNum+1)})},_navigator:function(){var u=navigator.userAgent;return{isWeixin:"micromessenger"==u.toLowerCase().match(/MicroMessenger/i),trident:u.indexOf("Trident")>-1,presto:u.indexOf("Presto")>-1,webKit:u.indexOf("AppleWebKit")>-1,gecko:u.indexOf("Gecko")>-1&&-1==u.indexOf("KHTML"),deskWebkit:-1==u.indexOf("Android")&&-1==u.indexOf("Mobile"),mobileWebKit:!!u.match(/AppleWebKit.*Mobile.*/)||!!u.match(/AppleWebKit/)||!!u.match(/.*Mobile.*/),ios:!!u.match(/(i[^;]+\;(U;)? CPU.+Mac OS X)/),android:u.indexOf("Android")>-1||u.indexOf("Linux")>-1,iPhone:u.indexOf("iPhone")>-1&&u.indexOf("Mac")>-1,iPad:u.indexOf("iPad")>-1,webApp:-1==u.indexOf("Safari")}},connectWebViewJavascriptBridge:function(callback){window.WebViewJavascriptBridge?callback(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){callback(WebViewJavascriptBridge)},!1)},_scroll:function(obj){var self=this;obj||(obj=$(".content")),$.config={showPageLoadingIndicator:!0},self._navigator().ios?self.scroller={type:"js"}:self.scroller={type:"auto"},obj.scroller(self.scroller)}};module.exports=main,main.init()}),define("/WEB-UED/fancy/dist/c/js/base64",[],function(require,exports,module){function encode64(input){input=unicodetoBytes(input);var chr1,chr2,enc1,enc2,enc3,output="",chr3="",enc4="",i=0;do chr1=input[i++],chr2=input[i++],chr3=input[i++],enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(i<input.length);return output}function unicodetoBytes(s){var result=new Array;if(null==s||""==s)return result;result.push(255),result.push(254);for(var i=0;i<s.length;i++){var c=s.charCodeAt(i).toString(16);1==c.length?i="000"+c:2==c.length?c="00"+c:3==c.length&&(c="0"+c);var var1=parseInt(c.substring(2),16),var2=parseInt(c.substring(0,2),16);result.push(var1),result.push(var2)}return result}var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";exports.encode64=encode64});