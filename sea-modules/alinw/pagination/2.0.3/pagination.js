define("alinw/pagination/2.0.3/pagination",["$","alinw/select/2.0.0/select","arale/select/0.9.7/select","arale/overlay/1.1.1/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/templatable/0.9.1/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("$"),e=a("alinw/select/2.0.0/select"),f=function(a,b){var c={size:10,page:1,redirectUrl:"#page/",wrap:'<nav><ul class="pagination"></ul></nav>',type:"common",sizeList:[10,20,50],currentPage:10,showOnePage:!1};this.element=a,this.options=d.extend({},c,b),this.init()};d.extend(f.prototype,{constructor:f,init:function(){this.$el=d(this.element),this.pageSize=10,this.ec=d({});var a=this.$container=d(this.options.wrap);this.$wrap=a.find("ul"),this.$el.append(a),this.render(),this.initEvents()},trigger:function(){this.ec.trigger.apply(this.ec,arguments)},on:function(){this.ec.on.apply(this.ec,arguments)},render:function(){var a=this;if("table"==this.options.type){this.$wrap.addClass("nav");for(var b="",c=0;c<this.options.sizeList.length;c++){var f=this.options.sizeList[c];if(this.options.currentPage == f){b+='<option value="'+f+'" selected>'+f+"\u6761/\u9875</option>"}else{b+='<option value="'+f+'">'+f+"\u6761/\u9875</option>"}}var g=d('<div class="pagination-goto"><span class="total-count">\u5171<span class="total-count-num"></span>\u6761</span><select class="size-per-page">'+b+"</select></div>");g.insertAfter(this.$wrap),a.$container.find("select").each(function(){var b=new e({trigger:this,width:75}).on("change",function(b){var c=d(b).data("value");a.$el.data("pagesize",c),a.pageSize=c,a.setPaging({total:a.total,page:1,size:c}),a.trigger("pagination:goto",1),a.options.onPageChanged&&d.isFunction(a.options.onPageChanged)&&a.options.onPageChanged.call(a,1)});b.element.addClass("kuma-pagination-select")})}else{this.$wrap.addClass("common-cell");var h=d('<div class="jump-to-page">\u53bb\u7b2c<input class="jump-to-page-input" type="text" class="ui-input" maxlength="6"/>\u9875<a class="J_confirmJumpTo kuma-button kuma-button-swhite">\u786e\u5b9a</a>');h.insertAfter(a.$wrap).on("click",".J_confirmJumpTo",function(){var b=h.find(".jump-to-page-input"),c=+b.val();/^[0-9]*$/.test(c)&&(a.page=c>a.maxPage?a.maxPage:a.page=1>c?1:c,a.setPaging({total:a.total,page:a.page,size:a.pageSize}),a.trigger("pagination:goto",a.page),a.options.onPageChanged&&d.isFunction(a.options.onPageChanged)&&a.options.onPageChanged.call(a,a.page))})}},initEvents:function(){this.$wrap.on("click","li:not(.disabled)",d.proxy(this.onPagingClicked,this)),this.on("page_updated",d.proxy(this.refreshPaging,this))},refreshPaging:function(){var a,b,c,e,f=this.page-1>0?this.page-1:1,g=this.page+1<this.maxPage?this.page+1:this.maxPage;if(this.$wrap.find("li").off("**"),this.$wrap.empty(),c=this.options.redirectUrl?d('<li data-index="prev"><a href="'+this.options.redirectUrl+f+'" title="\u4e0a\u4e00\u9875" class="">\u4e0a\u4e00\u9875</a></li>').appendTo(this.$wrap):d('<li class="prev" data-index="prev"><a href="javascript:;" title="\u4e0a\u4e00\u9875" class="">\u4e0a\u4e00\u9875</a></li>').appendTo(this.$wrap),1==this.page&&c.addClass("disabled"),this.maxPage>=1&&this.$wrap.append(this.options.redirectUrl?d('<li data-index="1"><a href="'+this.options.redirectUrl+'1">1</a></li>'):d('<li data-index="1"><a href="javascript:;">1</a></li>')),this.maxPage>1){for(a=this.page-2>2?this.page-2:2,b=this.page+2<this.maxPage?this.page+2:this.maxPage-1,this.page-2>2&&this.$wrap.append(d('<li class="disabled no-page"><a href="javascript:;">\u2026</a></li>')),a;b>=a;a++)if(this.options.redirectUrl){d('<li data-index="'+a+'"><a href="'+this.options.redirectUrl+a+'">'+a+"</a></li>").appendTo(this.$wrap)}else{d('<li data-index="'+a+'"><a href="javascript:;">'+a+"</a></li>").appendTo(this.$wrap)}this.page+3<this.maxPage&&this.$wrap.append(d('<li class="disabled no-page"><a href="javascript:;" >\u2026</a></li>')),this.$wrap.append(this.options.redirectUrl?d('<li data-index="'+this.maxPage+'"><a href="'+this.options.redirectUrl+this.maxPage+'">'+this.maxPage+"</a></li>"):d('<li data-index="'+this.maxPage+'"><a href="javascript:;">'+this.maxPage+"</a></li>"))}"table"==this.options.type&&this.$container.find(".total-count-num").text(this.total),e=this.options.redirectUrl?d('<li class="next" data-index="next"><a class="" href="'+this.options.redirectUrl+g+'" title="\u4e0b\u4e00\u9875">\u4e0b\u4e00\u9875</a></li>').appendTo(this.$wrap):d('<li class="next" data-index="next"><a class="" href="javascript:;" title="\u4e0b\u4e00\u9875">\u4e0b\u4e00\u9875</a></li>').appendTo(this.$wrap),this.page==this.maxPage&&e.addClass("disabled"),this.$wrap.find("li[data-index="+this.page+"]").addClass("active")},onPagingClicked:function(a){var b=this,c=d(a.currentTarget),e=c.data("index"),f=1;if(!c.hasClass("active")){switch(this.$wrap.find("li").removeClass("active"),c.addClass("active"),e){case"prev":f=b.page-1<1?1:b.page-1;break;case"next":f=b.page+1>b.maxPage?b.maxPage:b.page+1;break;case"first":f=1;break;case"last":f=b.maxPage;break;default:f=e}this.trigger("pagination:goto",this.page),this.options.onPageChanged&&d.isFunction(this.options.onPageChanged)&&this.options.onPageChanged.call(b,f)}},setPaging:function(a){return this.total=a.total,this.page=a.page,this.pageSize=a.size?a.size:this.options.size,this.maxPage=Math.ceil(this.total/this.pageSize),this.trigger("page_updated"),this.options.showOnePage||("table"==this.options.type?this.total<10?this.$container.hide():this.$container.show():1==this.maxPage?this.$container.hide():this.$container.show()),this}}),c.exports=f});